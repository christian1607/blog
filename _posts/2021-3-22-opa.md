---
layout: post
title: Open Policy Agent
---

In this blog we are going to talking about an interesting project called Open Policy Agent, which allows us to define policy as code in a seamlessly way, we are also going to work with rego files, which is the file that is used to evaluate a policy.

Open Policy Agent (OPA) is an open source project for declaring policy as code, using this tool we can allow or deny some action according our own rules (e.g: Deny kubernetes ingress controller creation if the image is not secure, Allow any http request for service A if Service B did the request, etc)


## Why do we need OPA?

In my case I use OPA for service-to-service authorization policy, this requirement could be easily done by the microservices itself but the drawnback in doing this way is that we need to update this policy for every microservice, or even worse if our microservices are written in different languages the complexity is increased.

OPA solves this obstacle by providing us a tool that is language-agnostic and my opinion a simple way to define policies.


## Architecture

OPA basically is deployed wether a centrally policy server where all components send a request to check if a current request is allowed or not; or as sidecar  component where is deployed next to our components


![_config.yml]({{ site.baseurl }}/images/opa-server-install.png)



## 








